# Node.js

## 01--全局对象-模块化

### 全局对象

```javascript
process
//包含各种信息
```

#### 注入参数

```javascript
node 文件名 wzx name=hello
//process的argv，注入信息
 argv: [
    'D:\\nodejs\\node.exe',
    'E:\\学习\\Node.js\\01全局对象-模块化开发\\node传参数.js',
    'wzx',
    'name=hello'
  ],
```

#### 输出方式

console相关API:https://nodejs.org/dist/latest-v16.x/docs/api/console.html

```javascript
//打印内容
console.log()
//输出后清空
console.clear()
//打印函数的调用栈
console.trace()
```

### 特殊的全局对象

概念：实际上是模块中的变量，只是每个模块都有，看起来像全局变量

命令行中交互不可以使用

```
包括__dirname，__filename，exports，require()，module
```

### 常见的全局对象

#### process对象 

node运行时的环境，参数变量等

#### 定时器

```javascript
//某一个时刻执行
setTimeout(() => {
    console.log("计时器")
}, 500);
setInterval(() => {
    console.log("定时器")
}, 500);
setImmediate(() => {
    console.log("立即执行")
})
//进程的
process.nextTick(() => {
    console.log("process.nextTick");
})
```

#### Global全局对象

global是一个全局对象，process，console，setTimeout放置在global中

#### window和global区别

```javascript
//window
var a = 2
console.log(window.a)//2

//global
var b = 3
conosole.log(global.b)
```

#### 模块化

每个模块有自己的作用域，自己的逻辑，不会影响其他结构

模块可以暴露出自己的变量，函数，对象导出等

引入模块中的变量，函数，对象等

##### 案例

```
//a文件定义name，b文件定义name，c文件console.log（name）,仍会打印值
```

##### 解决方法

1.IIFE（立即执行表达式）

```javascript
var moduleA = （function（）{
	var name = "a"
	var age = "b"
	return {
		name,
		age
	}
}）()
```

### CommonJS

```javascript
//CommonJS实际上是一种规范，简称CJS

//node是CommonJS在服务端的一种实现

//Broswerify是CommonJS在浏览器端实现

//webpack对CommonJS支持和转化
```

Node环境中

```javascript
//每个js文件是单独的模块
//模块包括CommonJS规范的核心变量，exports，module.exports，require
```

##### 内容导出

###### epxorts

```javascript
exports
//案例
//文件A
var name1 = "wzx"
console.log(name1);
let sex = "men"
function sayHello(name) {
    console.log(name);
}
exports.name1 = name1
exports.sex = sex
exports.sayHello = sayHello

//文件B
//返回的是exports对象
const obj = require("./js-module.js")
```

###### module.exports

```javascript
//Node使用的是Module类，每一个模块都是Module的实例，也就是Module
//导出新对象，两个模块没关系
module.exports = {
	name,
	age
}
```



##### 内容导入

```
require函数导入模块，其他模块（系统模块，自定义模块，第三方库模块）
```

